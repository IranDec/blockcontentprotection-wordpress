# Changelog

All notable changes to Block Content Protection will be documented in this file.

## [1.6.2] - 2025-10-22

### Fixed
- **Settings**: Corrected a bug where disabling a feature via its checkbox was not being saved correctly, causing the feature to remain active. The settings sanitization function has been refactored for improved reliability.

## [1.6.1] - 2025-10-22

### Fixed
- **Screenshot Blocking**: Implemented a more reliable screenshot blocking mechanism by triggering a blackout effect when the browser window loses focus. This more effectively prevents screenshots from OS-level tools like the Windows Snipping Tool (`Win+Shift+S`).

## [1.6.0] - 2025-10-22

### Added
- **Full Page Watermark**: Implemented a new, optional full-page dynamic watermark to deter screen recording and screenshots. This can be configured in the settings.
- **CSS Screenshot Blackout**: Added a CSS-based feature using `@media (display-capture: monitor)` to black out the screen when a browser-based screen capture is detected.

### Changed
- **Watermark Settings**: Refactored the watermark settings to distinguish between the existing video watermark and the new full-page watermark.

### Fixed
- **Watermark Functionality**: Corrected a bug where the watermark settings were not being correctly applied due to a mismatch between the PHP and JavaScript code.

## [1.5.9] - 2025-10-22

### Fixed
- **Video Controls**: Restored full functionality to the video player's native controls (volume, fullscreen, etc.) by removing the `bcp-click-handler` overlay and applying the correct CSS `pointer-events` properties to the watermark wrapper, ensuring all clicks are passed through to the video player.

## [1.5.8] - 2025-10-22

### Fixed
- **Video Controls**: Restored full functionality to the video player's native controls (volume, fullscreen, etc.) by removing the problematic transparent overlay.

### Changed
- Removed the transparent overlay feature, as it was interfering with video controls and was not reliably blocking all download managers. The plugin will now rely on the `controlsList="nodownload"` attribute and the Blob URL method for download protection.

---

## [1.5.7] - 2025-10-22

### Fixed
- **Video Controls**: Addressed an issue where the overlay used to block download managers was also covering the video's control bar, disabling the volume and fullscreen buttons. The overlay's height has been adjusted to keep the controls accessible.
- **Download Manager Blocking**: Improved the effectiveness of the download manager block by increasing the z-index of the overlay, ensuring it sits on top of any download manager buttons.
- **Screen Recording Block**: Re-implemented the screen recording block to fix a bug that caused the video to be blacked out at all times. The feature now uses a more reliable CSS-based approach.

---

## [1.5.6] - 2025-10-21

### Fixed
- **Video Play Button**: Resolved an issue where the transparent overlay intended to block download managers was also preventing the video's play button from being clicked. The overlay now correctly passes the click event to the video player.
- **Screen Recording Block**: Fixed a major bug where enabling the screen recording block would cause the video to be blacked out in all situations. The feature has been refactored to a simpler, more reliable CSS-based approach that only activates when a screen recording is detected.

### Changed
- Refactored the screen recording detection JavaScript for better reliability and maintainability.

---

## [1.4.0] - 2025-10-03

### Added
- **Mobile Screenshot Blocking**: New feature to block screenshots on mobile devices (Android)
  - FLAG_SECURE meta tag for Android devices
  - Three-finger gesture detection
  - Automatic blur on focus loss
  - Visibility change protection
  
- **Video Screen Recording Protection**: New advanced feature to protect videos from screen recording
  - Detects `getDisplayMedia` API usage
  - Automatically turns videos black when recording is detected
  - Continuous monitoring during playback
  - Multiple protection layers
  
- **Enhanced Security Features**:
  - DevTools opening detection with automatic page blocking
  - Iframe embedding prevention
  - Print blocking via CSS
  - Automatic clipboard clearing after screenshot attempts
  
- **New Settings**:
  - Mobile Screenshot Block toggle
  - Video Screen Recording Block toggle
  - Custom alert message for recording detection
  
- **CSS Enhancements**:
  - Mobile-specific protection styles
  - Video blackout filters
  - Recording detection visual feedback
  - Enhanced blur effects

### Changed
- Updated main plugin file to version 1.4.0
- Improved JavaScript protection logic
- Enhanced CSS protection layers
- Updated README with new features and important notes
- Improved user experience with better alert messages

### Fixed
- Better error handling in recording detection
- Improved mobile device detection
- Fixed clipboard clearing issues on some browsers

### Technical Details
- Added Page Visibility API monitoring
- Implemented MediaDevices API detection
- Enhanced MutationObserver for dynamic videos
- Improved cross-browser compatibility

---

## [1.3.0] - 2025-09-29

### Added
- Enhanced screen protection option
- Screenshot shortcut blocking (PrintScreen, Cmd+Shift+3/4)
- Custom alert messages
- IP whitelist functionality
- Page/Post exclusion by ID

### Changed
- Improved settings page UI
- Better sanitization of user inputs
- Enhanced protection mechanisms

### Fixed
- Right-click disable on some themes
- Text selection issues on mobile
- Video download attribute not applying

---

## [1.2.0] - 2025-08-15

### Added
- Video download protection
- Image drag prevention
- Developer tools blocking
- Copy prevention

### Changed
- Improved code structure
- Better performance optimization

---

## [1.1.0] - 2025-07-10

### Added
- Text selection blocking
- Basic right-click protection

### Changed
- Initial settings page design

---

## [1.0.0] - 2025-06-01

### Added
- Initial release
- Basic right-click protection
- Developer tools blocking
- Copy protection

---

## Important Notes

### Version 1.4.0 Limitations
- Mobile screenshot blocking works better on Android than iOS
- Video recording protection cannot prevent all hardware-based methods
- Some advanced users may bypass these protections
- May impact user experience on some devices

### Upgrade Instructions
1. Backup your current plugin files
2. Replace old files with new version
3. Go to Settings > Content Protection
4. Enable new features (Mobile Screenshot Block, Video Screen Recording Block)
5. Customize alert messages
6. Test on different devices

---

## Roadmap

### Future Versions

**v1.5.0** (Planned)
- Watermark overlay for images and videos
- Advanced DRM-like protection
- Activity logging and reporting
- Admin notifications for protection violations

---

## Support

For issues, questions, or feature requests:
- Website: [adschi.com](https://adschi.com)
- GitHub: [Your Repository URL]
- Email: [Your Email]

---

## License

MIT License - Copyright (c) 2025 Mohammad Babaei
